{% extends "base.html" %}

{% load static %}

{% block page_content %}

<script src="{% static 'js/ol.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/ol.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'adminManager/css/source_data.css' %}" type="text/css">

<section>
    <div class="content">
        <header>

            <div id="dataset-header-div">
                <div class="row">
                    <img height="30px" src="{% static 'images/dataset.png' %}">
                    <h2 style="text-align:left">
                        Dataset: &nbsp;&nbsp;{{ source.name }}
                    </h2>
                </div>
                <div>
                    <a class="button" href="{% url 'dataset_edit' source.pk %}">Edit</a>
                </div>
            </div>

            <div class="box">

                <div id="map-info-div">

                    <div id="map"></div>

                    <div id="map-info">

                        <span style="vertical-align:top">URL: 
                        <a href="{{ source.url }}">{{ source.url|slice:":60" }}...</a>
                        </span>

                        <br>

                        <span style="vertical-align:top">Valid from: 
                        {{ source.valid_from }}
                        </span>

                        <br>

                        <span style="vertical-align:top">Valid to: 
                        {{ source.valid_to }}
                        </span>

                        <br>
                    
                        <span style="vertical-align:top">Citation: 
                        {{ source.citation }}
                        </span>

                        <br>
                    
                        <span style="vertical-align:top">Source Note: 
                        {{ source.note }}
                        </span>

                        <br>

                        <span style="vertical-align:top">Input Data ({{ source.importers.all.count }}): 
                        </span>

                        <br>

                        <table id="dataset-input-table">
                            <thead>
                                <tr>
                                    <th>File URL</th>
                                    <th>Levels</th>
                                    <th>Last imported</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for importer in source.importers.all %}
                                    <tr>
                                        <td>{{ importer.import_params.path }}</td>
                                        <td>{{ importer.import_params.levels|length }}</td>
                                        <td>{{ importer.last_imported }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>

    </div>
</section>

<script src="{% static 'adminManager/js/source_data.js' %}"></script>

{% endblock %}
