{% extends "base.html" %}

{% load static %}

{% block page_content %}

<script src="{% static 'js/ol.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/ol.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'adminManager/css/import_params.css' %}" type="text/css">
<script src="{% static 'adminManager/js/import_forms.js' %}"></script>

<section>
    <div class="content">
        <header>
            <button style="float:right" type="submit" form="form1">Save</button>
            <a class="button" style="float:right" href="{% url 'dataset' form.instance.pk %}">Cancel</a>

            <div class="row">
                <img height="30px" src="{% static 'images/dataset.png' %}">
                <h2 style="text-align:left">
                    Editing Data Source
                </h2>
            </div>
        </header>

        <div>
            <form id="form1" method="POST" action="{% url 'dataset_edit' form.instance.pk %}">
                {% csrf_token %}

                <div id="tabs">
                    <ul class='etabs'>
                        <li class='tab'><a href="#metadata-tab">Metadata</a></li>
                        <li class='tab'><a href="#import-tab">Inputs</a></li>
                    </ul>
                    <div class="tab-container">
                        <div id="metadata-tab" class="panel-container">
                            <table>
                                {{ form.as_table }}
                            </table>
                        </div>
                        <div id="import-tab" class="panel-container">
                            {{ importer_forms.0.media }}
                            {{ importer_forms.management_form }}
                            {% for import_form in importer_forms %}
                                <div id="input-id-{{ forloop.counter }}" class="input-form-div" {% if forloop.counter > importer_forms.initial_form_count %}style="display:none"{% endif %}>
                                    <label style="float:right">
                                        Delete
                                        {{ import_form.DELETE }}
                                    </label>
                                    <h3>Input {{ forloop.counter }}</h3>
                                    {{ import_form.id }}
                                    {{ import_form.source }}
                                    {{ import_form.import_params }}
                                </div>
                            {% endfor %}
                            <button type="button" onclick="addInputForm()">+ Add Input</button>
                        </div>
                    </div>
                </div>

                <script>
                    // init easytabs
                    $('#tabs').easytabs({animate:false});
                </script>
            </form>
        </div>

        <br><br>

    </div>
</section>

{% endblock %}
